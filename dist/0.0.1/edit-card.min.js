!function(e){function t(o){if(a[o])return a[o].exports;var n=a[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){a(1),e.exports=a(7)},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=a(2),i=o(n),r=a(3),s=o(r),l=a(4),c=o(l);window.ProtoGraph=window.ProtoGraph||{},window.ProtoGraph.Card=window.ProtoGraph.Card||{},ProtoGraph.Card.toTimeline=function(){this.cardType="TimelineCard"},ProtoGraph.Card.toTimeline.prototype.init=function(e){this.options=e},ProtoGraph.Card.toTimeline.prototype.getData=function(e){return this.containerInstance.exportData()},ProtoGraph.Card.toTimeline.prototype.renderCol7=function(e){this.mode="col7",s.default.unmountComponentAtNode(this.options.selector),this.render()},ProtoGraph.Card.toTimeline.prototype.renderCol4=function(e){this.mode="col4",s.default.unmountComponentAtNode(this.options.selector),this.render()},ProtoGraph.Card.toTimeline.prototype.render=function(){var e=this;s.default.render(i.default.createElement(c.default,{dataURL:this.options.data_url,siteConfigURL:this.options.site_config_url,siteConfigs:this.options.site_configs,mode:this.mode,ref:function(t){e.containerInstance=e.containerInstance||t}}),this.options.selector)}},function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=a(2),c=o(l),d=a(3),u=(o(d),a(5)),m=o(u),p=a(6),f=o(p),g=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o={fetchingData:!0,dataJSON:{data:{},mandatory_config:{}},optionalConfigJSON:{},languageTexts:{},siteConfigs:a.props.siteConfigs,ready:!1,curr:1};return a.props.dataJSON&&(o.fetchingData=!1,o.dataJSON=a.props.dataJSON),a.props.optionalConfigJSON&&(o.optionalConfigJSON=a.props.optionalConfigJSON),a.props.languageTexts&&(o.languageTexts=a.props.languageTexts),a.state=o,a}return r(t,e),s(t,[{key:"exportData",value:function(){return document.getElementById("protograph_div").getBoundingClientRect()}},{key:"componentWillReceiveProps",value:function(e){e.optionalConfigJSON&&this.setState({optionalConfigJSON:e.optionalConfigJSON})}},{key:"componentDidMount",value:function(){var e=this;if(this.state.fetchingData){var t=[m.default.get(this.props.dataURL)];this.props.siteConfigURL&&t.push(m.default.get(this.props.siteConfigURL)),m.default.all(t).then(m.default.spread(function(t,a){var o={fetchingData:!1,dataJSON:{data:t.data.data,mandatory_config:t.data.mandatory_config},optionalConfigJSON:{},siteConfigs:a?a.data:e.state.siteConfigs};o.dataJSON.mandatory_config.language=o.siteConfigs.primary_language.toLowerCase(),o.languageTexts=e.getLanguageTexts(o.dataJSON.mandatory_config.language),o.optionalConfigJSON.start_button_color=o.siteConfigs.house_colour,o.optionalConfigJSON.start_button_text_color=o.siteConfigs.font_colour,e.setState(o)}))}}},{key:"getLanguageTexts",value:function(e){var t=e?e:"english",a=void 0;switch(t.toLowerCase()){case"hindi":a={button_text:"चलो समय यात्रा करे",font:"'Hindi', sans-serif"};break;default:a={button_text:"Let's time travel",font:"'Helvetica Neue', sans-serif, aerial"}}return a}},{key:"componentDidUpdate",value:function(){var e=Array.prototype.slice.call(document.getElementsByClassName("proto-single-event")),t=document.getElementsByClassName("proto-timeline-card")[0],a=1/0,o=void 0;t&&(Array.prototype.slice.call(document.getElementsByClassName("active")).forEach(function(e){e.classList.remove("active")}),e.forEach(function(e){var t=e.getBoundingClientRect().top;t>0&&t<a&&(o=e,a=t)}),t.scrollHeight-t.clientHeight===t.scrollTop&&(o=e[e.length-1]),o.classList.add("active"))}},{key:"handleScroll",value:function(){var e=Array.prototype.slice.call(document.getElementsByClassName("proto-single-event")),t=document.getElementsByClassName("proto-timeline-card")[0],a=1/0,o=void 0,n=void 0;Array.prototype.slice.call(document.getElementsByClassName("active")).forEach(function(e){e.classList.remove("active")}),e.forEach(function(e,t){var i=e.getBoundingClientRect().top;i>0&&i<a&&(o=e,a=i,n=t+1)}),t.scrollHeight-t.clientHeight===t.scrollTop&&(o=e[e.length-1],n=e.length),o.classList.add("active"),this.setState({curr:n})}},{key:"matchDomain",value:function(e,t){var a=this.getDomainFromURL(t).replace(/^(https?:\/\/)?(www\.)?/,""),o=this.subDomain(e),n=this.subDomain(a);return o?e===a||e.indexOf(a)>=0:n?e===a||a.indexOf(e)>=0:e===a}},{key:"getDomainFromURL",value:function(e){var t=document.createElement("a");return t.href=e,t.hostname}},{key:"subDomain",value:function e(t){t||(t=""),t=t.replace(new RegExp(/^\s+/),""),t=t.replace(new RegExp(/\s+$/),""),t=t.replace(new RegExp(/\\/g),"/"),t=t.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),""),t=t.replace(new RegExp(/^www\./i),""),t=t.replace(new RegExp(/\/(.*)/),""),t.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))?t=t.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),""):t.match(new RegExp(/\.[a-z]{2,4}$/i))&&(t=t.replace(new RegExp(/\.[a-z]{2,4}$/i),""));var e=!!t.match(new RegExp(/\./g));return e}},{key:"flipper",value:function(){document.getElementsByClassName("proto-totimelinecard")[0].classList.add("proto-flipped"),this.setState({ready:!0})}},{key:"renderCol7",value:function(){var e=this;if(this.state.fetchingData)return c.default.createElement("div",null,"Loading");var t=this.state.dataJSON.data.events.slice();t.sort(function(e,t){return new Date(e.single_event.timestamp_date)-new Date(t.single_event.timestamp_date)});var a=this.state.dataJSON,o=t[0].single_event.timestamp_date,n=t[t.length-1].single_event.timestamp_date,i=(0,f.default)(new Date(o),"mmm yyyy"),r=(0,f.default)(new Date(n),"mmm yyyy"),s=100*(this.state.curr/a.data.events.length)+"%",l=this.state.optionalConfigJSON.house_colour,d=this.state.optionalConfigJSON.font_colour;this.state.dataJSON.mandatory_config.interactive||(l="rgba(51, 51, 51, 0.75)",d="#fff"),this.state.dataJSON.mandatory_config.sponsored&&(l=this.state.optionalConfigJSON.reverse_house_colour,d=this.state.optionalConfigJSON.reverse_font_colour);var u=this.state.dataJSON.mandatory_config.faviconurl,m=this.state.dataJSON.mandatory_config.url,p=m&&m.split("/");p&&p[2];this.matchDomain(this.state.domain,m)&&(u=void 0);var g=window.vertical_name||this.state.dataJSON.mandatory_config.series,h=this.state.dataJSON.mandatory_config.genre,v="1px 1px 1px 5px";return!h&&g&&(v="2.5px 5px"),g||h||(v="0px"),h&&!g&&(v="1px"),c.default.createElement("div",{id:"protograph_div",className:"proto-totimelinecard proto-parent-card-desktop"},c.default.createElement("div",{className:"proto-first-view proto-view"},c.default.createElement("div",{className:"proto-col-3 proto-view-in-desktop"},c.default.createElement("div",{className:"proto-card-tags"},u?c.default.createElement("div",{className:"proto-publisher-icon",style:{backgroundColor:this.state.dataJSON.mandatory_config.iconbgcolor||"white"}},c.default.createElement("img",{className:"proto-favicon",src:u})):null,c.default.createElement("div",{className:"proto-series-name",style:{padding:v}},g,h?c.default.createElement("div",{className:"proto-genre",style:{backgroundColor:l,color:d,marginLeft:g?"3px":"0px"}},h," "):null),c.default.createElement("div",{className:"proto-sub-genre-dark",style:{fontStyle:this.state.dataJSON.mandatory_config.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.mandatory_config.sponsored?"underline":"none"}},this.state.dataJSON.mandatory_config.sponsored?"Sponsored":this.state.dataJSON.mandatory_config.subgenre)),c.default.createElement("div",{className:"proto-cover-content"},c.default.createElement("div",{className:"proto-title"},a.mandatory_config.timeline_title),c.default.createElement("div",{className:"proto-description"},a.mandatory_config.timeline_description),c.default.createElement("div",{onClick:function(){e.flipper()},className:"proto-call-to-action-button"},this.state.languageTexts.button_text))),c.default.createElement("div",{className:"proto-col-4"},c.default.createElement("div",{className:"proto-cover-image"},c.default.createElement("img",{className:"proto-image",src:a.mandatory_config.timeline_image})))),c.default.createElement("div",{className:"proto-second-view proto-view"},c.default.createElement("div",{className:"proto-col-3 proto-view-in-desktop"},c.default.createElement("div",{className:"proto-tag-area"}),c.default.createElement("div",{className:"proto-cover-content"},c.default.createElement("div",{className:"proto-title"},a.mandatory_config.timeline_title),c.default.createElement("div",{className:"proto-description"},a.mandatory_config.timeline_description))),c.default.createElement("div",{className:"proto-col-4",onScroll:function(){return e.handleScroll()}},c.default.createElement("div",{className:"proto-progress-line",id:"proto_progress_desktop"},c.default.createElement("div",{className:"proto-progress-start-lable"},i),c.default.createElement("div",{className:"proto-progress-container"},c.default.createElement("div",{className:"proto-progress-after",style:{height:s}}),c.default.createElement("div",{className:"proto-progress"})),c.default.createElement("div",{className:"proto-progress-end-lable"},r)),c.default.createElement("div",{className:"proto-main-content"},c.default.createElement("div",{className:"proto-timeline-card"},t.map(function(e,t){var a=(0,f.default)(new Date(e.single_event.timestamp_date),"mmm dd, yyyy");return c.default.createElement("div",{key:t,className:"proto-single-event"},c.default.createElement("div",{className:"proto-timeline-time"},a),c.default.createElement("div",{className:"proto-quiz-answer"},e.single_event.header),e.single_event.photo&&c.default.createElement("div",{className:"proto-quiz-answer-image"},c.default.createElement("img",{src:e.single_event.photo,className:"proto-image"})),c.default.createElement("p",null,e.single_event.message))}))))))}},{key:"renderCol4",value:function(){var e=this;if(this.state.fetchingData)return c.default.createElement("div",null,"Loading");var t=this.state.dataJSON.data.events.slice();t.sort(function(e,t){return new Date(e.single_event.timestamp_date)-new Date(t.single_event.timestamp_date)});var a=this.state.dataJSON,o=t[0].single_event.timestamp_date,n=t[t.length-1].single_event.timestamp_date,i=(0,f.default)(new Date(o),"mmm yyyy"),r=(0,f.default)(new Date(n),"mmm yyyy"),s=100*(this.state.curr/a.data.events.length)+"%",l=this.state.optionalConfigJSON.house_colour,d=this.state.optionalConfigJSON.font_colour;this.state.dataJSON.mandatory_config.interactive||(l="rgba(51, 51, 51, 0.75)",d="#fff"),this.state.dataJSON.mandatory_config.sponsored&&(l=this.state.optionalConfigJSON.reverse_house_colour,d=this.state.optionalConfigJSON.reverse_font_colour);var u=this.state.dataJSON.mandatory_config.faviconurl,m=this.state.dataJSON.mandatory_config.url,p=m&&m.split("/");p&&p[2];this.matchDomain(this.state.domain,m)&&(u=void 0);var g=window.vertical_name||this.state.dataJSON.mandatory_config.series,h=this.state.dataJSON.mandatory_config.genre,v="1px 1px 1px 5px";return!h&&g&&(v="2.5px 5px"),g||h||(v="0px"),h&&!g&&(v="1px"),c.default.createElement("div",{id:"protograph_div",className:"proto-totimelinecard proto-parent-card-mobile"},c.default.createElement("div",{className:"proto-first-view proto-view"},c.default.createElement("div",{className:"proto-col-4"},c.default.createElement("div",{className:"proto-cover-image"},c.default.createElement("img",{style:{height:"100%",width:"100%"},src:a.mandatory_config.timeline_image}),c.default.createElement("div",{className:"proto-card-tags proto-card-tags-mobile"},u?c.default.createElement("div",{className:"proto-publisher-icon",style:{backgroundColor:this.state.dataJSON.mandatory_config.iconbgcolor||"white"}},c.default.createElement("img",{className:"proto-favicon",src:u})):null,c.default.createElement("div",{className:"proto-series-name",style:{padding:v}},g,h?c.default.createElement("div",{className:"proto-genre",style:{backgroundColor:l,color:d,marginLeft:g?"3px":"0px"}},h," "):null),c.default.createElement("div",{className:"proto-sub-genre-light",style:{fontStyle:this.state.dataJSON.mandatory_config.sponsored?"italic":"normal",textDecoration:this.state.dataJSON.mandatory_config.sponsored?"underline":"none"}},this.state.dataJSON.mandatory_config.sponsored?"Sponsored":this.state.dataJSON.mandatory_config.subgenre)),c.default.createElement("div",{className:"proto-black-overlay"},c.default.createElement("div",{className:"proto-cover-content"},c.default.createElement("div",{className:"proto-title proto-font-white"},a.mandatory_config.timeline_title),c.default.createElement("div",{className:"proto-description proto-font-white"},a.mandatory_config.timeline_description),c.default.createElement("div",{onClick:function(){e.flipper()},className:"proto-call-to-action-button"},"Let's time travel")))))),c.default.createElement("div",{className:"proto-second-view proto-view"},c.default.createElement("div",{className:"proto-col-4",onScroll:function(){return e.handleScroll()}},c.default.createElement("div",{className:"proto-progress-line",id:"proto_progress_mobile"},c.default.createElement("div",{className:"proto-progress-start-lable"},i),c.default.createElement("div",{className:"proto-progress-container"},c.default.createElement("div",{className:"proto-progress-after",style:{height:s}}),c.default.createElement("div",{className:"proto-progress"})),c.default.createElement("div",{className:"proto-progress-end-lable"},r)),c.default.createElement("div",{className:"proto-main-content"},c.default.createElement("div",{className:"proto-timeline-card"},t.map(function(e,t){var a=(0,f.default)(new Date(e.single_event.timestamp_date),"mmm dd, yyyy");return c.default.createElement("div",{key:t,className:"proto-single-event"},c.default.createElement("div",{className:"proto-timeline-time"},a),c.default.createElement("div",{className:"proto-quiz-answer"},e.single_event.header),e.single_event.photo&&c.default.createElement("div",{className:"proto-quiz-answer-image"},c.default.createElement("img",{src:e.single_event.photo,className:"proto-image"})),c.default.createElement("p",null,e.single_event.message))}))))))}},{key:"render",value:function(){switch(this.props.mode){case"col7":return this.renderCol7();case"col4":return this.renderCol4()}}}]),t}(c.default.Component);t.default=g},function(e,t){e.exports=axios},function(e,t,a){var o;!function(n){"use strict";function i(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function r(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var o=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-o);var n=(t-a)/6048e5;return 1+Math.floor(n)}function s(e){var t=e.getDay();return 0===t&&(t=7),t}function l(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}var c=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(o,n,d,u){if(1!==arguments.length||"string"!==l(o)||/\d/.test(o)||(n=o,o=void 0),o=o||new Date,o instanceof Date||(o=new Date(o)),isNaN(o))throw TypeError("Invalid date");n=String(c.masks[n]||n||c.masks.default);var m=n.slice(0,4);"UTC:"!==m&&"GMT:"!==m||(n=n.slice(4),d=!0,"GMT:"===m&&(u=!0));var p=d?"getUTC":"get",f=o[p+"Date"](),g=o[p+"Day"](),h=o[p+"Month"](),v=o[p+"FullYear"](),y=o[p+"Hours"](),N=o[p+"Minutes"](),_=o[p+"Seconds"](),S=o[p+"Milliseconds"](),E=d?0:o.getTimezoneOffset(),O=r(o),C=s(o),b={d:f,dd:i(f),ddd:c.i18n.dayNames[g],dddd:c.i18n.dayNames[g+7],m:h+1,mm:i(h+1),mmm:c.i18n.monthNames[h],mmmm:c.i18n.monthNames[h+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:i(y%12||12),H:y,HH:i(y),M:N,MM:i(N),s:_,ss:i(_),l:i(S,3),L:i(Math.round(S/10)),t:y<12?c.i18n.timeNames[0]:c.i18n.timeNames[1],tt:y<12?c.i18n.timeNames[2]:c.i18n.timeNames[3],T:y<12?c.i18n.timeNames[4]:c.i18n.timeNames[5],TT:y<12?c.i18n.timeNames[6]:c.i18n.timeNames[7],Z:u?"GMT":d?"UTC":(String(o).match(t)||[""]).pop().replace(a,""),o:(E>0?"-":"+")+i(100*Math.floor(Math.abs(E)/60)+Math.abs(E)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10],W:O,N:C};return n.replace(e,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}();c.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},c.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},o=function(){return c}.call(t,a,t,e),!(void 0!==o&&(e.exports=o))}(this)},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=a(2),i=o(n),r=a(3),s=o(r),l=a(8),c=o(l);ProtoGraph.Card.toTimeline.prototype.getData=function(e){return this.containerInstance.exportData()},ProtoGraph.Card.toTimeline.prototype.renderSEO=function(e){return this.renderMode="SEO",this.containerInstance.renderSEO()},ProtoGraph.Card.toTimeline.prototype.renderEdit=function(e){var t=this;this.mode="edit",this.onPublishCallback=e,s.default.unmountComponentAtNode(this.options.selector),s.default.render(i.default.createElement(c.default,{dataURL:this.options.data_url,schemaURL:this.options.schema_url,uiSchemaURL:this.options.ui_schema_url,optionalConfigURL:this.options.configuration_url,optionalConfigSchemaURL:this.options.configuration_schema_url,siteConfigURL:this.options.site_config_url,onPublishCallback:this.onPublishCallback,mode:this.mode,ref:function(e){t.containerInstance=t.containerInstance||e}}),this.options.selector)}},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=a(2),c=o(l),d=a(3),u=(o(d),a(5)),m=o(u),p=a(4),f=o(p),g=a(9),h=o(g),v=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={step:1,dataJSON:{data:{},mandatory_config:{}},uiSchemaJSON:{},mode:"col7",publishing:!1,schemaJSON:void 0,errorOnFetchingData:void 0,optionalConfigJSON:{},optionalConfigSchemaJSON:void 0,render:!0},a.toggleMode=a.toggleMode.bind(a),a}return r(t,e),s(t,[{key:"exportData",value:function(){var e={step:this.state.step,dataJSON:this.state.dataJSON,schemaJSON:this.state.schemaJSON,optionalConfigJSON:this.state.optionalConfigJSON,optionalConfigSchemaJSON:this.state.optionalConfigSchemaJSON};return e.name=e.dataJSON.mandatory_config.timeline_title,e}},{key:"componentDidMount",value:function(){var e=this;"string"==typeof this.props.dataURL&&m.default.all([m.default.get(this.props.dataURL),m.default.get(this.props.schemaURL),m.default.get(this.props.optionalConfigURL),m.default.get(this.props.optionalConfigSchemaURL),m.default.get(this.props.uiSchemaURL),m.default.get(this.props.siteConfigURL)]).then(m.default.spread(function(t,a,o,n,i,r){var s={dataJSON:{data:t.data.data,mandatory_config:t.data.mandatory_config},schemaJSON:a.data,optionalConfigJSON:o.data,optionalConfigSchemaJSON:n.data,uiSchemaJSON:i.data,siteConfigs:r.data};s.dataJSON.mandatory_config.language=s.siteConfigs.primary_language.toLowerCase(),s.languageTexts=e.getLanguageTexts(s.dataJSON.mandatory_config.language),s.optionalConfigJSON.start_button_color=s.siteConfigs.house_colour,s.optionalConfigJSON.start_button_text_color=s.siteConfigs.font_colour,e.setState(s)})).catch(function(t){e.setState({errorOnFetchingData:!0})})}},{key:"getLanguageTexts",value:function(e){var t=e?e:"english",a=void 0;switch(t.toLowerCase()){case"hindi":a={button_text:"चलो समय यात्रा करे",font:"'Hindi', sans-serif"};break;default:a={button_text:"Let's time travel",font:"'Helvetica Neue', sans-serif, aerial"}}return a}},{key:"onChangeHandler",value:function(e){var t=e.formData;switch(this.state.step){case 1:this.setState(function(e,a){var o=e.dataJSON;return o.mandatory_config=t,o.data.section=t.timeline_title,{dataJSON:o}});break;case 2:this.setState(function(e,a){var o=e.dataJSON;return o.data.events=t.events,{dataJSON:o}})}}},{key:"onSubmitHandler",value:function(e){var t=this;switch(this.state.step){case 1:this.setState({step:2});break;case 2:if("function"==typeof this.props.onPublishCallback){var a=this.state.dataJSON;a.data.section=a.mandatory_config.timeline_title,this.setState({publishing:!0,dataJSON:a});var o=this.props.onPublishCallback();o.then(function(e){t.setState({publishing:!1})})}}}},{key:"renderSEO",value:function(){var e=this.state.dataJSON.data.events,t=e.map(function(e,t){return"<h3>"+e.single_event.header+"</h3><p>"+e.single_event.message+"</p><p>"+e.single_event.timestamp_date+"</p>"}),a="<blockquote>"+t.join()+"</blockquote>";return a}},{key:"renderSchemaJSON",value:function(){switch(this.state.step){case 1:return this.state.schemaJSON.properties.mandatory_config;case 2:return this.state.schemaJSON.properties.data;case 3:return this.state.optionalConfigSchemaJSON}}},{key:"getFormData",value:function(){switch(this.state.step){case 1:return this.state.dataJSON.mandatory_config;case 2:return this.state.dataJSON.data}}},{key:"showLinkText",value:function(){switch(this.state.step){case 1:return"";case 2:case 3:return"< Back"}}},{key:"showButtonText",value:function(){switch(this.state.step){case 1:return"Next";case 2:return"Publish"}}},{key:"onPrevHandler",value:function(){var e=--this.state.step;this.setState({step:e})}},{key:"toggleMode",value:function(e){var t=this,a=e.target.closest("a"),o=a.getAttribute("data-mode");this.setState(function(e,t){var a=void 0;return a=o!==e.mode?o:e.mode,{mode:a,render:!1}},function(){t.setState({render:!0})})}},{key:"render",value:function(){var e=this;if(void 0===this.state.schemaJSON)return c.default.createElement("div",{className:"protograph-loader-container"},this.state.errorOnFetchingData?c.default.createElement("div",{className:"ui basic message"},c.default.createElement("div",{className:"header"},"Failed to load resources"),c.default.createElement("p",null,"Try clearing your browser cache and refresh the page.")):"Loading");var t=JSON.parse(JSON.stringify(this.state.dataJSON.mandatory_config));return c.default.createElement("div",{className:"proto-container"},c.default.createElement("div",{className:"ui grid form-layout"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"four wide column proto-card-form"},c.default.createElement("div",null,c.default.createElement("div",{className:"section-title-text"},"Fill the form"),c.default.createElement("div",{className:"ui label proto-pull-right"},"toTimeline")),c.default.createElement(h.default,{schema:this.renderSchemaJSON(),onSubmit:function(t){return e.onSubmitHandler(t)},onChange:function(t){return e.onChangeHandler(t)},formData:this.getFormData(),referenceFormData:t,uiSchema:this.state.uiSchemaJSON.data,transformErrors:this.transformErrors},c.default.createElement("a",{id:"protograph_prev_link",onClick:function(t){return e.onPrevHandler(t)}},this.showLinkText()," "),c.default.createElement("button",{type:"submit",className:(this.state.publishing?"ui primary loading disabled button":"")+" default-button protograph-primary-button"},this.showButtonText()))),c.default.createElement("div",{className:"twelve wide column proto-card-preview proto-share-card-div"},c.default.createElement("div",{className:"protograph-menu-container"},c.default.createElement("div",{className:"ui compact menu"},c.default.createElement("a",{className:"item "+("col7"===this.state.mode?"active":""),"data-mode":"col7",onClick:this.toggleMode},"7col"),c.default.createElement("a",{className:"item "+("col4"===this.state.mode?"active":""),"data-mode":"col4",onClick:this.toggleMode},"4col"))),this.state.render&&c.default.createElement(f.default,{mode:this.state.mode,dataJSON:this.state.dataJSON,optionalConfigJSON:this.state.optionalConfigJSON,languageTexts:this.state.languageTexts,siteConfigs:this.state.siteConfigs})))))}}]),t}(c.default.Component);t.default=v},function(e,t){e.exports=JSONSchemaForm}]);